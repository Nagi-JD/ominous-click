<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/svg+xml" href="/pumpkin.svg">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Halloween Clicker - Test API</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 50px auto;
        padding: 20px;
      }
      .test-section {
        background: #f5f5f5;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
      }
      button {
        background: #000;
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 8px;
        cursor: pointer;
        margin: 5px;
      }
      button:hover {
        background: #333;
      }
      pre {
        background: #f0f0f0;
        padding: 10px;
        border-radius: 4px;
        overflow-x: auto;
      }
      .success { color: green; }
      .error { color: red; }
    </style>
  </head>
  <body>
    <h1>ðŸ§ª Test API - Halloween Clicker</h1>
    
    <div class="test-section">
      <h2>1. Test submit-score API</h2>
      <button onclick="testSubmit()">Test Submit Score</button>
      <pre id="submitResult">Click the button...</pre>
    </div>
    
    <div class="test-section">
      <h2>2. Test leaderboard API</h2>
      <button onclick="testLeaderboard()">Test Leaderboard</button>
      <pre id="leaderboardResult">Click the button...</pre>
    </div>
    
    <div class="test-section">
      <h2>3. Test verify-token API</h2>
      <button onclick="testVerify()">Test Verify Token</button>
      <pre id="verifyResult">Click the button...</pre>
    </div>

    <script>
      async function testSubmit() {
        const resultEl = document.getElementById('submitResult')
        resultEl.textContent = 'Testing...'
        
        try {
          const res = await fetch('https://halloweenproject-quqc.vercel.app/api/submit-score', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              address: 'Test' + Date.now(),
              score: Math.floor(Math.random() * 1000000),
              stats: { damagePerClick: 10, damagePerSecond: 5 }
            })
          })
          
          const data = await res.json()
          resultEl.textContent = JSON.stringify(data, null, 2)
          resultEl.className = res.ok ? 'success' : 'error'
        } catch (err) {
          resultEl.textContent = 'Error: ' + err.message
          resultEl.className = 'error'
        }
      }
      
      async function testLeaderboard() {
        const resultEl = document.getElementById('leaderboardResult')
        resultEl.textContent = 'Testing...'
        
        try {
          const res = await fetch('https://halloweenproject-quqc.vercel.app/api/leaderboard')
          const data = await res.json()
          resultEl.textContent = JSON.stringify(data, null, 2)
          resultEl.className = res.ok ? 'success' : 'error'
        } catch (err) {
          resultEl.textContent = 'Error: ' + err.message
          resultEl.className = 'error'
        }
      }
      
      async function testVerify() {
        const resultEl = document.getElementById('verifyResult')
        resultEl.textContent = 'Testing...'
        
        try {
          const res = await fetch('https://halloweenproject-quqc.vercel.app/api/verify-token', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ address: '9i9y5uZPFZYVJE8Ym4agXjkaCqniSDT95JPfSUH5pump' })
          })
          
          const data = await res.json()
          resultEl.textContent = JSON.stringify(data, null, 2)
          resultEl.className = res.ok ? 'success' : 'error'
        } catch (err) {
          resultEl.textContent = 'Error: ' + err.message
          resultEl.className = 'error'
        }
      }
    </script>
  </body>
</html>
